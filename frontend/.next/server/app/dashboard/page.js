(()=>{var e={};e.id=702,e.ids=[702],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},6281:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(7096),a=r(6132),o=r(7284),i=r.n(o),n=r(2564),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2918)),"S:\\Github\\Phase-II_Todo_App\\frontend\\src\\app\\dashboard\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,8182)),"S:\\Github\\Phase-II_Todo_App\\frontend\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9113)),"S:\\Github\\Phase-II_Todo_App\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["S:\\Github\\Phase-II_Todo_App\\frontend\\src\\app\\dashboard\\page.tsx"],u="/dashboard/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7810:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3579,23)),Promise.resolve().then(r.t.bind(r,619,23)),Promise.resolve().then(r.t.bind(r,1459,23)),Promise.resolve().then(r.t.bind(r,3456,23)),Promise.resolve().then(r.t.bind(r,847,23)),Promise.resolve().then(r.t.bind(r,7303,23))},7553:()=>{},7615:(e,t,r)=>{Promise.resolve().then(r.bind(r,3052))},5303:()=>{},3052:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(3854),a=r(4218),o=r(1018),i=r(4340);function n({children:e}){let[t,r]=(0,a.useState)(null),n=(0,o.useRouter)(),{isAuthenticated:l,isLoading:d}=(0,i.a)();return((0,a.useEffect)(()=>{d||(l?r(!0):(r(!1),n.push("/login")))},[l,d,n]),null===t||d)?s.jsx("div",{className:"flex justify-center items-center min-h-screen bg-black",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white/30"})}):t?s.jsx(s.Fragment,{children:e}):null}function l({task:e,onToggle:t,onDelete:r,onEdit:a}){return s.jsx("li",{className:`px-4 py-4 ${e.completed?"bg-white/5":"bg-black"}`,children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>t(e.id),className:"h-4 w-4"}),(0,s.jsxs)("div",{className:"ml-3",children:[s.jsx("p",{className:e.completed?"line-through text-[#a1a1aa]":"text-white",children:e.title}),e.description&&s.jsx("p",{className:"text-sm text-[#a1a1aa]",children:e.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:a,className:"px-2 py-1 text-xs rounded border border-blue-500/30 text-blue-400 hover:bg-blue-900/30",children:"Edit"}),s.jsx("button",{onClick:r,className:"px-2 py-1 text-xs rounded border border-red-500/30 text-red-400 hover:bg-red-900/30",children:"Delete"})]})]})})}function d({userId:e,onSubmit:t,onCancel:r,initialData:o}){let[i,n]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[c,u]=(0,a.useState)("");return(0,a.useEffect)(()=>{o&&(n(o.title),d(o.description??""))},[o]),(0,s.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),!i.trim()){u("Title is required");return}if(i.length>255){u("Title must be 255 characters or less");return}if(l.length>1e3){u("Description must be 1000 characters or less");return}u(""),t({title:i.trim(),description:l.trim(),user_id:e})},className:"space-y-4",children:[c&&s.jsx("div",{className:"rounded-md bg-red-900/30 p-4 border border-red-800/50",children:s.jsx("h3",{className:"text-sm font-medium text-red-300",children:c})}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white",children:"Title *"}),s.jsx("input",{value:i,onChange:e=>n(e.target.value),className:"mt-1 block w-full rounded-md border border-white/20 bg-black p-2 text-white"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white",children:"Description"}),s.jsx("textarea",{rows:3,value:l,onChange:e=>d(e.target.value),className:"mt-1 block w-full rounded-md border border-white/20 bg-black p-2 text-white"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm text-[#a1a1aa] hover:bg-white/10 rounded",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm bg-white text-black rounded",children:o?"Update Task":"Add Task"})]})]})}var c=r(6874);let u=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000",h=c.Z.create({baseURL:u,timeout:1e4,headers:{"Content-Type":"application/json"}});h.interceptors.request.use(e=>{let t=localStorage.getItem("jwt_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),h.interceptors.response.use(e=>e,e=>((e.response?.status===401||e.response?.status===403)&&(localStorage.removeItem("jwt_token"),window.location.href="/login"),Promise.reject(e)));let p=async()=>{try{let e=await h.get("/signup/users/from-token/tasks");return e.data??[]}catch(e){throw e}},m=async e=>{try{let t=await h.post("/signup/users/from-token/tasks",e);if(!t.data)throw Error("Task creation failed: no data returned");return t.data}catch(e){throw e}},x=async(e,t)=>{try{let r=await h.put(`/signup/users/from-token/tasks/${e}`,t);if(!r.data)throw Error("Task update failed: no data returned");return r.data}catch(e){throw e}},b=async e=>{try{return await h.delete(`/signup/users/from-token/tasks/${e}`),!0}catch(e){throw e}},g=async(e,t)=>{try{let r=await h.patch(`/signup/users/from-token/tasks/${e}/complete`,{completed:t});if(!r.data)throw Error("Task completion toggle failed: no data returned");return r.data}catch(e){throw e}},f=()=>{let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null),n=e=>e.filter(e=>"object"==typeof e&&null!==e&&"id"in e&&"title"in e&&"completed"in e);(0,a.useEffect)(()=>{l()},[]);let l=async()=>{try{s(!0),i(null);let e=await p();t(Array.isArray(e)?n(e):[])}catch(e){i("Failed to fetch tasks"),console.error(e)}finally{s(!1)}},d=async e=>{let r=-Date.now(),s={id:r,title:e.title,description:e.description,completed:e.completed??!1,user_id:"temp",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(e=>[...e,s]);try{let s=await m(e),a=s.data;return a&&t(e=>e.map(e=>e.id===r?a:e)),a}catch(e){throw t(e=>e.filter(e=>e.id!==r)),i("Failed to create task"),console.error(e),e}},c=async(e,r)=>{if(!(e<0)){t(t=>t.map(t=>t.id===e?{...t,...r}:t));try{let s=await x(e,r),a=s.data;return a&&t(t=>t.map(t=>t.id===e?a:t)),a}catch(e){throw i("Failed to update task"),console.error(e),e}}},u=async r=>{let s=e.find(e=>e.id===r);if(s&&(t(e=>e.filter(e=>e.id!==r)),!(r<0)))try{await b(r)}catch(e){throw t(e=>[...e,s]),i("Failed to delete task"),console.error(e),e}},h=async r=>{let s=e.find(e=>e.id===r);if(s&&(t(e=>e.map(e=>e.id===r?{...e,completed:!e.completed}:e)),!(r<0)))try{let e=await g(r,!s.completed),a=e.data;return a&&t(e=>e.map(e=>e.id===r?a:e)),a}catch(e){throw t(e=>e.map(e=>e.id===r?{...e,completed:s.completed}:e)),i("Failed to toggle task completion"),console.error(e),e}};return{tasks:e,loading:r,error:o,fetchTasks:l,addTask:d,updateTaskById:c,removeTask:u,toggleCompletion:h}};function w({userId:e}){let[t,r]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),{tasks:n,loading:c,error:u,addTask:h,updateTaskById:p,toggleCompletion:m,removeTask:x}=f();return c?s.jsx("div",{className:"flex justify-center items-center py-10",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white/30"})}):u?(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-800/50 text-red-300 px-4 py-3 rounded",children:[s.jsx("strong",{children:"Error:"})," ",u]}):(0,s.jsxs)("div",{className:"bg-black border border-white/10 rounded-md overflow-hidden",children:[(0,s.jsxs)("div",{className:"px-4 py-5 border-b border-white/10 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"Your Tasks"}),s.jsx("button",{onClick:()=>{r(e=>!e),i(null)},className:"px-4 py-2 border border-white/20 bg-white/10 hover:bg-white/20 text-white text-sm rounded",children:t?"Cancel":"Add Task"})]}),(t||o)&&s.jsx("div",{className:"px-4 py-5 border-b border-white/10",children:s.jsx(d,{userId:e,initialData:o??void 0,onSubmit:async e=>{o?(await p(o.id,e),i(null)):(await h(e),r(!1))},onCancel:()=>{r(!1),i(null)}})}),0===n.length?s.jsx("div",{className:"text-center py-10 text-[#a1a1aa]",children:"No tasks yet. Add one!"}):s.jsx("ul",{className:"divide-y divide-white/10",children:n.map(e=>s.jsx(l,{task:e,onToggle:m,onDelete:()=>x(e.id),onEdit:()=>{i(e),r(!1)}},e.id))})]})}function y(){let e=(0,o.useRouter)(),{user:t,isAuthenticated:r,isLoading:l,logout:d}=(0,i.a)();return((0,a.useEffect)(()=>{l||r||(e.push("/login"),localStorage.removeItem("jwt_token"),localStorage.removeItem("auth_user"),e.replace("/login"))},[r,l,e]),l)?(0,s.jsxs)("div",{className:"min-h-screen bg-black flex flex-col",children:[(0,s.jsxs)("nav",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[s.jsx("div",{className:"text-xl font-bold text-white",children:"Todo App"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-[#a1a1aa]",children:"Loading..."}),s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-white/30"})]})]}),s.jsx("div",{className:"flex justify-center items-center flex-grow",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white/30"})})]}):r?s.jsx(n,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-black flex flex-col",children:[(0,s.jsxs)("nav",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[s.jsx("div",{className:"text-xl font-bold text-white",children:"Todo App"}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-[#a1a1aa]",children:["Welcome, ",t?.username]}),s.jsx("button",{onClick:async()=>{await d(),e.push("/login")},className:"text-[#a1a1aa] hover:text-white border border-white/20 bg-transparent hover:bg-white/10 transition-colors duration-200 px-4 py-2 rounded-md",children:"Logout"})]})]}),s.jsx("main",{className:"flex-grow p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-8",children:"Task Dashboard"}),s.jsx(w,{userId:t?.id||""})]})})]})}):null}},4340:(e,t,r)=>{"use strict";r.d(t,{a:()=>d});var s=r(4218),a=r(6874);let o=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000",i="auth_user",n="jwt_token",l={login:async(e,t)=>{try{let r=await a.Z.post(`${o}/auth/login`,{email:e,password:t},{headers:{"Content-Type":"application/json"}}),{user:s,token:l}=r.data;return localStorage.setItem(n,l),localStorage.setItem(i,JSON.stringify(s)),{user:s,token:l}}catch(e){if(a.Z.isAxiosError(e))throw Error(e.response?.data?.message||"Login failed");throw e}},signup:async(e,t,r)=>{try{let s=await a.Z.post(`${o}/auth/signup`,{username:r,email:e,password:t},{headers:{"Content-Type":"application/json"}}),{user:l,token:d}=s.data;return localStorage.setItem(n,d),localStorage.setItem(i,JSON.stringify(l)),{user:l,token:d}}catch(e){if(a.Z.isAxiosError(e))throw Error(e.response?.data?.message||"Signup failed");throw e}},logout:async()=>(localStorage.removeItem(n),localStorage.removeItem(i),{message:"Successfully logged out"}),getCurrentSession:async()=>{let e=localStorage.getItem(n),t=localStorage.getItem(i);if(!e||!t)return null;try{return{token:e,user:JSON.parse(t)}}catch{return localStorage.removeItem(n),localStorage.removeItem(i),null}},isAuthenticated:()=>!!localStorage.getItem(n)},d=()=>{let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=async()=>{try{let e=await l.getCurrentSession();e?(t(e.user),a(!0)):(t(null),a(!1))}catch(e){console.error("Error checking auth status:",e),t(null),a(!1)}finally{i(!1)}};e()},[]);let n=async(e,r)=>{try{let s=await l.login(e,r);return t(s.user),a(!0),s}catch(e){throw e}},d=async(e,r,s)=>{try{let o=await l.signup(e,r,s);return t(o.user),a(!0),o}catch(e){throw e}},c=async()=>{try{await l.logout(),t(null),a(!1)}catch(e){console.error("Error during logout:",e)}};return{user:e,isAuthenticated:r,isLoading:o,login:n,signup:d,logout:c}}},8182:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(4656);function a({children:e}){return s.jsx("div",{children:e})}},2918:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var s=r(5153);let a=(0,s.createProxy)(String.raw`S:\Github\Phase-II_Todo_App\frontend\src\app\dashboard\page.tsx`),{__esModule:o,$$typeof:i}=a,n=a.default,l=n},9113:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>i});var s=r(4656),a=r(186),o=r.n(a);r(5023);let i={title:"Todo App",description:"A secure todo application with authentication"};function n({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:`${o().className} min-h-screen`,children:s.jsx("div",{className:"min-h-screen flex flex-col",children:e})})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[211,642],()=>r(4766));module.exports=s})();